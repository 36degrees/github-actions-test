on:
  push:
    branches:
      - '*'

name: Create Tag

jobs:
  create-tag:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: actions/github-script@v3
        with:
          github-token: ${{secrets.GITHUB_TOKEN}}
          script: |
            const version = require(`${process.env.GITHUB_WORKSPACE}/package.json`).version

            const tag = await github.git.getTag({
              owner: context.repo.owner,
              repo: context.repo.repo,
              tag_sha: `v${version}`
            })

            console.log(tag)

            const tag2 = await github.git.getTag({
              owner: context.repo.owner,
              repo: context.repo.repo,
              tag_sha: `v1.0.1`
            })

            console.log(tag2)
